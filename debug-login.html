<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - Login System</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            color: #4ec9b0;
        }

        .section {
            background: #252526;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #3e3e42;
        }

        .success {
            color: #4ec9b0;
        }

        .error {
            color: #f48771;
        }

        .warning {
            color: #ce9178;
        }

        button {
            background: #0e639c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-family: inherit;
        }

        button:hover {
            background: #1177bb;
        }

        button.danger {
            background: #f48771;
        }

        button.danger:hover {
            background: #ff6347;
        }

        pre {
            background: #1e1e1e;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
        }

        .info {
            background: #264f78;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
    </style>
</head>

<body>
    <h1>üîç Login System Debug Console</h1>

    <div class="section">
        <h2>üìä Current Status</h2>
        <div id="status"></div>
    </div>

    <div class="section">
        <h2>üë• Registered Users</h2>
        <div id="users"></div>
    </div>

    <div class="section">
        <h2>üéØ Quick Actions</h2>
        <button onclick="initDemoAccount()">Create Demo User</button>
        <button onclick="testAdminLogin()">Test Admin Login</button>
        <button onclick="testDemoLogin()">Test Demo User Login</button>
        <button class="danger" onclick="clearAll()">Clear All Data</button>
        <button onclick="location.href='login.html'">Go to Login Page</button>
    </div>

    <div class="section">
        <h2>üìù Console Logs</h2>
        <div id="logs"></div>
    </div>

    <script>
        function log(message, type = 'info') {
            const logsDiv = document.getElementById('logs');
            const timestamp = new Date().toLocaleTimeString();
            const color = type === 'success' ? '#4ec9b0' : type === 'error' ? '#f48771' : '#d4d4d4';
            logsDiv.innerHTML = `<div style="color: ${color}">[${timestamp}] ${message}</div>` + logsDiv.innerHTML;
        }

        function updateStatus() {
            const currentUser = localStorage.getItem('currentUser');
            const users = JSON.parse(localStorage.getItem('conferenceUsers') || '[]');
            const submissions = JSON.parse(localStorage.getItem('paperSubmissions') || '[]');

            let statusHTML = '<div class="info">';

            if (currentUser) {
                const user = JSON.parse(currentUser);
                statusHTML += `<p class="success">‚úì Logged in as: ${user.email} (${user.role})</p>`;
            } else {
                statusHTML += `<p class="warning">‚ö† Not logged in</p>`;
            }

            statusHTML += `
                <p>üìß Registered Users: ${users.length}</p>
                <p>üìÑ Paper Submissions: ${submissions.length}</p>
            </div>`;

            document.getElementById('status').innerHTML = statusHTML;
        }

        function updateUsers() {
            const users = JSON.parse(localStorage.getItem('conferenceUsers') || '[]');

            if (users.length === 0) {
                document.getElementById('users').innerHTML = '<p class="warning">No users registered</p>';
                return;
            }

            let usersHTML = '<pre>';
            users.forEach((user, index) => {
                usersHTML += `
<span class="success">[${index + 1}]</span> ${user.fullName || 'N/A'}
    Email: ${user.email}
    Password: ${user.password}
    Category: ${user.category || 'N/A'}
    ID: ${user.id}
-------------------`;
            });
            usersHTML += '</pre>';

            document.getElementById('users').innerHTML = usersHTML;
        }

        function initDemoAccount() {
            const users = JSON.parse(localStorage.getItem('conferenceUsers') || '[]');

            const existingDemo = users.find(u => u.email === 'demo@university.edu');
            if (existingDemo) {
                log('Demo user already exists!', 'warning');
                return;
            }

            const demoUser = {
                id: 'USER_DEMO_001',
                title: 'Dr.',
                fullName: 'Dr. Jane Smith',
                email: 'demo@university.edu',
                password: 'demo123',
                phone: '+1 555-0123',
                affiliation: 'MIT',
                designation: 'faculty',
                address: '77 Massachusetts Avenue',
                country: 'United States',
                city: 'Cambridge',
                category: 'faculty',
                registrationDate: new Date().toISOString(),
                paymentCompleted: true
            };

            users.push(demoUser);
            localStorage.setItem('conferenceUsers', JSON.stringify(users));

            log('‚úì Demo user created: demo@university.edu / demo123', 'success');
            updateStatus();
            updateUsers();
        }

        function testAdminLogin() {
            localStorage.setItem('currentUser', JSON.stringify({
                email: 'admin@conference.com',
                fullName: 'Admin',
                role: 'admin',
                loginTime: new Date().toISOString()
            }));
            log('‚úì Admin session created', 'success');
            updateStatus();
            setTimeout(() => {
                if (confirm('Admin login successful! Go to admin panel?')) {
                    location.href = 'admin.html';
                }
            }, 500);
        }

        function testDemoLogin() {
            const users = JSON.parse(localStorage.getItem('conferenceUsers') || '[]');
            const demo = users.find(u => u.email === 'demo@university.edu');

            if (!demo) {
                log('‚úó Demo user not found! Click "Create Demo User" first', 'error');
                return;
            }

            localStorage.setItem('currentUser', JSON.stringify({
                ...demo,
                role: 'user',
                loginTime: new Date().toISOString()
            }));
            log('‚úì Demo user session created', 'success');
            updateStatus();
            setTimeout(() => {
                if (confirm('User login successful! Go to paper submission?')) {
                    location.href = 'papersubmission.html';
                }
            }, 500);
        }

        function clearAll() {
            if (confirm('‚ö† This will delete ALL data including users and submissions. Continue?')) {
                localStorage.removeItem('conferenceUsers');
                localStorage.removeItem('paperSubmissions');
                localStorage.removeItem('currentUser');
                log('‚úì All data cleared', 'success');
                updateStatus();
                updateUsers();
            }
        }

        // Initialize
        updateStatus();
        updateUsers();
        log('Debug console loaded', 'success');
    </script>
</body>

</html>